<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Volatileçš„å¦ä¸€ç§ç†è§£</title>
      <link href="/2021/10/07/shi-fou-shi-volatile-de-chong-pai-xu/"/>
      <url>/2021/10/07/shi-fou-shi-volatile-de-chong-pai-xu/</url>
      
        <content type="html"><![CDATA[<p>ä¸€æ®µä»£ç </p><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">VolatileTest</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// volatile static boolean flag;</span>    <span class="token keyword">static</span> <span class="token keyword">boolean</span> flag<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> <span class="token keyword">throws</span> InterruptedException <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span> <span class="token punctuation">(</span> <span class="token string">"Thread start"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// todo something</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span> <span class="token punctuation">(</span> <span class="token string">"Thread end"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Thread<span class="token punctuation">.</span><span class="token function">sleep</span> <span class="token punctuation">(</span> <span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>        flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span> <span class="token punctuation">(</span> <span class="token string">"Main Thread end"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>å†™å¥½åï¼Œå•çº¯è¿è¡Œæ—¶å‘ç°å­çº¿ç¨‹æ˜¯æ— æ³•åœæ­¢çš„</p></li><li><p>ä½†æ˜¯ç”¨<code>volatile</code>å…³é”®å­—ä¿®é¥°åï¼Œå¯ä»¥åœæ­¢ï¼Œå¾—åˆ°ç»“è®ºæ˜¯åˆ©ç”¨äº†<code>volatile</code>ä¿è¯äº†å¯è§æ€§ï¼Œä½†æ˜¯è¿™ä¸ªç»“è®ºä¸ä¸€å®šæ˜¯å¯¹çš„</p></li></ul><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€åˆ—çš„è®ºè¯</p><ul><li><p>é¦–å…ˆæˆ‘ä»¬çŸ¥é“Javaæ‰§è¡ŒæŒ‡ä»¤è¦ä¹ˆé€šè¿‡<code>è§£é‡Šå™¨</code>æˆ–è€…<code>ç¼–è¯‘å™¨åçš„æœ¬åœ°ä»£ç </code></p></li><li><p>é‚£æºä»£ç åˆ°æœ€ç»ˆçš„æŒ‡ä»¤é›†éœ€è¦ç»è¿‡ï¼š</p><p><code>æºä»£ç </code>-&gt;<code>ç¼–è¯‘å™¨ä¼˜åŒ–é‡æ’åº</code>-&gt;<code>æŒ‡ä»¤çº§å¹¶è¡Œé‡æ’åº</code>-&gt;<code>å†…å­˜ç³»ç»Ÿé‡æ’åº</code>-&gt;<code>æœ€ç»ˆæ‰§è¡Œé¡ºåºçš„æŒ‡ä»¤é¡ºåº</code></p></li><li><p>æ‰€ä»¥çŒœæµ‹æ˜¯ä¸æ˜¯å› ä¸ºç¼–è¯‘å™¨æŒ‡ä»¤çš„åŸå› ï¼Ÿæˆ‘ä»¬å»æ‰<code>volatile</code>åŠ ä¸ŠVMå‚æ•° <code>-Xint</code>ï¼ˆpsï¼šåªå¯ç”¨è§£æå™¨æ‰§è¡Œä»£ç ï¼‰,ç»“æœå‘ç°ç¨‹åºé¡ºåˆ©åœæ­¢äº†</p></li></ul><p>å›é¡¾ä¸‹<code>Volatile</code>å…³é”®å­—çŸ¥è¯†ç‚¹</p><ul><li>Javaä¸­çš„<code>volatile</code>å…³é”®å­—çš„ä½œç”¨ï¼šä¿è¯èµ„æºçš„å¯è§æ€§ã€ä¿è¯åŸºæœ¬æ•°æ®ç±»å‹èµ„æºçš„åŸå­æ€§</li><li>è™šæ‹Ÿæœºä¸­åŸºäºåŸè¯­æŒ‡ä»¤<code>lock</code>å®ç°<code>åŸå­æ€§</code>ï¼ŒåŸºäº<code>å†…å­˜å±éšœ</code>ä¿éšœå¯è§æ€§ï¼ŒåŒæ—¶ç¦æ­¢ç¼–è¯‘å™¨æŒ‡ä»¤é‡æ’åº(<code>ç¦æ­¢äº†ç¼–è¯‘å™¨ä¼˜åŒ–</code>)</li><li>ç¼–è¯‘å™¨ä¼˜åŒ–æ¶‰åŠ<code>æŒ‡ä»¤é‡æ’åº</code>ã€<code>æ˜¯å¦ä»å¯„å­˜å™¨ä¸­è·å–èµ„æº</code></li></ul><p>ç»“è®º</p><ul><li>ä¹‹æ‰€ä»¥æ·»åŠ <code>Volatile</code>èƒ½åœæ­¢ï¼Œä¸æ˜¯å› ä¸º<code>ç¦æ­¢æŒ‡ä»¤é‡æ’åº</code>ï¼Œè€Œæ˜¯<code>ç¦æ­¢äº†ç¼–è¯‘å™¨ä¼˜åŒ–</code>.</li><li>åªå¯ç”¨è§£é‡Šå™¨æ‰§è¡Œèƒ½åœæ­¢ï¼Œè®¡ç®—æœºä¸­æ¯ä¸ªCPUéƒ½æœ‰è‡ªå·±çš„ç¼“å­˜ï¼ŒåŸºäºJMMï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„æœ¬åœ°å†…å­˜ï¼Œè¿™å„¿ä¸»çº¿ç¨‹ä¿®æ”¹äº†æœ¬åœ°å†…å­˜èµ„æºï¼Œä¸»çº¿ç¨‹ä¸­æœ¬åœ°å†…å­˜èµ„æºæ€»ä¼šåœ¨æŸä¸ªæ—¶åˆ»æ›´æ–°åˆ°ä¸»å­˜ä¸­ï¼Œä»è€ŒCPUé€šè¿‡å—…æ¢æ€»çº¿ä¼šé€šçŸ¥CPUç¼“å­˜èµ„æºå¤±æ•ˆï¼Œä»è€Œé‡æ–°åˆ°ä¸»å­˜ä¸­è·å–</li></ul><p>æ‰©å±•</p><ul><li>Cè¯­è¨€ä¸­ä¹Ÿæœ‰<code>volatile</code>å…³é”®å­—ï¼ŒLinuxçš„å¼€å‘è€…æå…¶ä¸æ¨èä½¿ç”¨ï¼Œå› ä¸ºä»–ä»¬è®¤ä¸ºå¤§å¤šæ•°ä½¿ç”¨åœºæ™¯éƒ½è¿èƒŒäº†æ­¤å…³é”®å­—è®¾è®¡çš„åˆè¡·</li><li>å…·ä½“çœ‹æ–‡æ¡£ï¼š<a href="https://www.kernel.org/doc/Documentation/process/volatile-considered-harmful.rst">Why the â€œvolatileâ€ type class should not be used</a></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Volatile </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOSåªå®‰è£…mysql client</title>
      <link href="/2021/04/20/centos-zhi-an-zhuang-mysql-client/"/>
      <url>/2021/04/20/centos-zhi-an-zhuang-mysql-client/</url>
      
        <content type="html"><![CDATA[<h2 id="CentOSåªå®‰è£…mysql-client"><a href="#CentOSåªå®‰è£…mysql-client" class="headerlink" title="CentOSåªå®‰è£…mysql client"></a>CentOSåªå®‰è£…mysql client</h2><h3 id="å¼€ç®±å³ç”¨-gt-gt-gt-gt"><a href="#å¼€ç®±å³ç”¨-gt-gt-gt-gt" class="headerlink" title="å¼€ç®±å³ç”¨ &gt;&gt;&gt;&gt;"></a>å¼€ç®±å³ç”¨ &gt;&gt;&gt;&gt;</h3><pre class="line-numbers language-shell"><code class="language-shell"># è·å–æœ€æ–°æº https://dev.mysql.com/downloads/repo/yum/# æ­¤å¤„é€šè¿‡ rpmå»å®‰è£…yumæºwget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm# æœ¬åœ°å®‰è£…ä¸‹è½½çš„rpmæºsudo yum localinstall mysql80-community-release-el7-3.noarch.rpm # æ£€æŸ¥æ˜¯å¦ç”Ÿæ•ˆyum repolist enabled | grep "mysql.*-community.*"# ä¼šçœ‹è§ç±»ä¼¼ç»“æœï¼Œè¯´æ˜ç”Ÿæ•ˆ[root@VM-8-8-centos ~]# yum repolist enabled | grep "mysql.*-community.*"mysql-connectors-community/x86_64   MySQL Connectors Community               194mysql-tools-community/x86_64        MySQL Tools Community                    126mysql80-community/x86_64            MySQL 8.0 Community Server               247# ä¸‹é¢é€šè¿‡yumæŸ¥çœ‹æ˜¯å¦æœ‰ mysql-community-clientyum search mysql | grep "mysql.*client"# çœ‹ç»“æœ å·²å­˜åœ¨ 'mysql-community-client'ï¼Œæœ€åå»å®‰è£…å³å¯[root@VM-8-8-centos ~]# yum search mysql | grep "mysql.*client"mysql-community-client.i686 : MySQL database client applications and toolsmysql-community-client.x86_64 : MySQL database client applications and toolsmysql-community-client-plugins.i686 : Shared plugins for MySQL clientmysql-community-client-plugins.x86_64 : Shared plugins for MySQL clientmysql-community-common.i686 : MySQL database common files for server and clientmysql-community-libs.i686 : Shared libraries for MySQL database clientmysql-community-libs.x86_64 : Shared libraries for MySQL database clientroot-sql-mysql.x86_64 : MySQL client plugin for ROOT<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>å‚è€ƒ</strong>ã€<a href="https://dev.mysql.com/doc/refman/5.7/en/linux-installation-rpm.html">MYSQLå®˜ç½‘å®‰è£…æ•™ç¨‹</a>ã€‘</p>]]></content>
      
      
      
        <tags>
            
            <tag> Javaå†…çœ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2020/07/28/hello-world/"/>
      <url>/2020/07/28/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>è®°ä¸€æ¬¡ï¼šæ¢å¤Mysqlæ•°æ®</title>
      <link href="/2020/03/09/ji-yi-ci-hui-fu-mysql-shu-ju/"/>
      <url>/2020/03/09/ji-yi-ci-hui-fu-mysql-shu-ju/</url>
      
        <content type="html"><![CDATA[<p>0x06ï¼šé¡¹ç›®èµ·åˆå¯¹æ¡†æ¶ä¸ç†Ÿæ‚‰è€Œå¯¼è‡´ </p><span id="more"></span><p>å‰è¨€ï¼šèµ·åˆæƒ³é€šè¿‡å…¨å±€sqlæ—¥å¿—æ¢å¤ï¼Œåé¢æŸ¥çœ‹mysqlé…ç½®å¹¶æ²¡æœ‰æ‰“å¼€å…¨å±€æ—¥å¿—ï¼Œä½†æ˜¯æ‰“å¼€äº† bin-log,åŠäºŒè¿›åˆ¶æ—¥å¿—ï¼Œå¹³å‡æ¯ä¸ª1Gå·¦å³ã€‚</p><p>å¼€å§‹æ–¹æ¡ˆï¼šæ®å®˜æ–¹äº†è§£ï¼Œbin-log å¯ä»¥é€šè¿‡ mysqlbinlog å·¥å…·è§£æ<br>å¯åŠ¨æ–¹æ¡ˆï¼š</p><ul><li><p>é€šè¿‡ è§£æbase64<code>-v --base64-output=decode-rows</code>å¹¶è¿‡æ»¤åªæå– <code>--database</code> åº“çš„æ—¥å¿—.</p><pre class="line-numbers language-shell"><code class="language-shell">  mysqlbinlog -v --base64-output=decode-rows --database=databasename mysql-bin.000016 > 16.log<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>å½“å‰ç›®å½•ä¸‹çš„ <code>mysql-bin.000016</code> å¹¶è¾“å‡ºåˆ°å½“å‰ <code>16.log</code>æ–‡ä»¶ä¸­.</p><pre class="line-numbers language-shell"><code class="language-shell">  /*!50530 SET @@SESSION.PSEUDO_SLAVE_MODE=1*/;  /*!50003 SET @OLD_COMPLETION_TYPE=@@COMPLETION_TYPE,COMPLETION_TYPE=0*/;  DELIMITER /*!*/;  # at 4  #200115  0:52:33 server id 10100332  end_log_pos 123 CRC32 0xf47ac891     Start: binlog v 4, server v 5.7.21-enterprise-commercial-advanced-log created 200115  0:52:33  # at 123  #200115  0:52:33 server id 10100332  end_log_pos 154 CRC32 0xcd2ae247     Previous-GTIDs  # [empty]  # at 154  .....<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>æœ€åæå–<code>INSERT INTO</code>è¯­å¥å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p><pre class="line-numbers language-shell"><code class="language-shell">  # at 507657591  # ...  ### INSERT INTO `database`.`tabel`  ### SET  ###   @1=146  ###   @2=61  ###   @3=NULL  ###   .....<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>ä¸Šé¢çš„ <code>@</code> ç¬¦å·åé¢çš„æ•°å­—å°±æ˜¯å­—æ®µçš„ä¸‹æ ‡ï¼Œä»<code>1</code>å¼€å§‹.</p></li><li><p>æœ€åè§£æäº†<code>76G</code>æ—¥å¿—</p></li></ul><p>åè®°ï¼šå‡¡äº‹ä¸‰æ€è€Œåè¡Œ!</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºWeChat-OAuthç¬¬ä¸‰æ–¹ç™»å½•</title>
      <link href="/2020/02/24/ji-yu-wechat-oauth-di-san-fang-deng-lu/"/>
      <url>/2020/02/24/ji-yu-wechat-oauth-di-san-fang-deng-lu/</url>
      
        <content type="html"><![CDATA[<p>0x05ï¼š<code>å¼€å§‹ç†è§£OAuth</code></p><span id="more"></span><h1 id="æµç¨‹å›¾"><a href="#æµç¨‹å›¾" class="headerlink" title="æµç¨‹å›¾"></a>æµç¨‹å›¾</h1><p><img src="https://pjmic.github.io//post-images/1582553011394.png" alt=""></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>lombokæ³¨è§£@Builderç®€å•åˆ›å»ºå¯¹è±¡</title>
      <link href="/2020/01/20/lombok-zhu-jie-builder-jian-dan-chuang-jian-dui-xiang/"/>
      <url>/2020/01/20/lombok-zhu-jie-builder-jian-dan-chuang-jian-dui-xiang/</url>
      
        <content type="html"><![CDATA[<p>0x04ï¼š<code>JavaåŸºç¡€</code></p><span id="more"></span><p><strong>ä¸åºŸè¯æ³¨è§£å¼€å§‹ï¼š</strong></p><h2 id="ä¸€ã€-å¯¼å…¥ä¾èµ–"><a href="#ä¸€ã€-å¯¼å…¥ä¾èµ–" class="headerlink" title="ä¸€ã€ å¯¼å…¥ä¾èµ–"></a><strong>ä¸€ã€ å¯¼å…¥ä¾èµ–</strong></h2><pre class="line-numbers language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>1.16.18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="äºŒã€åˆ›å»ºentity"><a href="#äºŒã€åˆ›å»ºentity" class="headerlink" title="äºŒã€åˆ›å»ºentity"></a><strong>äºŒã€åˆ›å»ºentity</strong></h2><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">import</span> lombok<span class="token punctuation">.</span>Builder<span class="token punctuation">;</span><span class="token keyword">import</span> lombok<span class="token punctuation">.</span>Data<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * @Description //TODO . * @Author by LiuChunming on 2020/01/20. */</span><span class="token annotation punctuation">@Builder</span><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Tper</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> String id<span class="token punctuation">;</span>    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>    <span class="token keyword">private</span> String age<span class="token punctuation">;</span>    <span class="token keyword">private</span> String sex<span class="token punctuation">;</span>    <span class="token keyword">private</span> String hobby<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">double</span> aDouble<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>å¹¶æ·»åŠ æ³¨è§£ @Builder @Data</strong></p></blockquote><h2 id="ä¸‰ã€å¼€å§‹æµ‹è¯•"><a href="#ä¸‰ã€å¼€å§‹æµ‹è¯•" class="headerlink" title="ä¸‰ã€å¼€å§‹æµ‹è¯•"></a><strong>ä¸‰ã€å¼€å§‹æµ‹è¯•</strong></h2><pre class="line-numbers language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">builderInterfaceTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//åˆ›å»ºå¯¹è±¡</span>        Tper tper <span class="token operator">=</span> Tper<span class="token punctuation">.</span><span class="token function">builder</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>                <span class="token function">name</span> <span class="token punctuation">(</span> <span class="token string">"å¼ ä¸‰"</span> <span class="token punctuation">)</span><span class="token punctuation">.</span>                <span class="token function">age</span> <span class="token punctuation">(</span> <span class="token string">"19"</span> <span class="token punctuation">)</span><span class="token punctuation">.</span>                <span class="token function">sex</span> <span class="token punctuation">(</span> <span class="token string">"ç”·"</span> <span class="token punctuation">)</span><span class="token punctuation">.</span>                <span class="token function">hobby</span> <span class="token punctuation">(</span> <span class="token string">"Code"</span> <span class="token punctuation">)</span><span class="token punctuation">.</span>                <span class="token function">aDouble</span> <span class="token punctuation">(</span> <span class="token number">8D</span> <span class="token punctuation">)</span><span class="token punctuation">.</span>                <span class="token function">build</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span> <span class="token punctuation">(</span> tper <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><strong>æµ‹è¯•ç»“æœï¼š</strong></li></ul><p>â€‹    <img src="https://pjmic.github.io//post-images/1579484887683.jpg" alt=""></p><blockquote><p><strong>Share Over !</strong></p></blockquote>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Mybatis selectè¿”å›å€¼ä¸ºList&lt;Map&gt;å¹¶å°†è¡¨å­—æ®µçš„ä¸¤åˆ—ä¸ºK,V</title>
      <link href="/2020/01/07/mybatis-select-fan-hui-zhi-wei-listlessmapgreaterbing-jiang-biao-zi-duan-de-liang-lie-zuo-wei-keyvalue/"/>
      <url>/2020/01/07/mybatis-select-fan-hui-zhi-wei-listlessmapgreaterbing-jiang-biao-zi-duan-de-liang-lie-zuo-wei-keyvalue/</url>
      
        <content type="html"><![CDATA[<p>0x03ï¼š<code>mybatis</code></p><span id="more"></span><h2 id="åœºæ™¯é‡ç°"><a href="#åœºæ™¯é‡ç°" class="headerlink" title="åœºæ™¯é‡ç°"></a>åœºæ™¯é‡ç°</h2><hr/>### è¡¨ä¸­æœ‰è¿™æ ·çš„æ•°æ®<p><img src="https://pjmic.github.io//post-images/1578412769529.jpg" alt=""></p><h3 id="éœ€è¦å®ç°"><a href="#éœ€è¦å®ç°" class="headerlink" title="éœ€è¦å®ç°"></a>éœ€è¦å®ç°</h3><p><img src="https://pjmic.github.io//post-images/1578412975303.jpg" alt=""></p><h3 id="æ€è·¯æ˜¯é‡å†™è¿”å›Mybatis-selecté»˜è®¤æ˜ å°„Mapçš„è¿”å›æ¥å£ï¼Œé€šè¿‡æºç è¿½è¸ªï¼Œå‘ç°-â€œResultHandlerâ€è¿™ä¸ªæ¥å£"><a href="#æ€è·¯æ˜¯é‡å†™è¿”å›Mybatis-selecté»˜è®¤æ˜ å°„Mapçš„è¿”å›æ¥å£ï¼Œé€šè¿‡æºç è¿½è¸ªï¼Œå‘ç°-â€œResultHandlerâ€è¿™ä¸ªæ¥å£" class="headerlink" title="æ€è·¯æ˜¯é‡å†™è¿”å›Mybatis selecté»˜è®¤æ˜ å°„Mapçš„è¿”å›æ¥å£ï¼Œé€šè¿‡æºç è¿½è¸ªï¼Œå‘ç° â€œResultHandlerâ€è¿™ä¸ªæ¥å£;"></a>æ€è·¯æ˜¯é‡å†™è¿”å›Mybatis selecté»˜è®¤æ˜ å°„Mapçš„è¿”å›æ¥å£ï¼Œé€šè¿‡æºç è¿½è¸ªï¼Œå‘ç° â€œResultHandlerâ€è¿™ä¸ªæ¥å£;</h3><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">package</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>session<span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * @author Clinton Begin */</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ResultHandler</span><span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>  <span class="token keyword">void</span> <span class="token function">handleResult</span><span class="token punctuation">(</span>ResultContext<span class="token operator">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token operator">></span> resultContext<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="é€šè¿‡è§‚å¯Ÿä»–çš„å®ç°æœ‰ä¸¤ä¸ªå®ç°ï¼š"><a href="#é€šè¿‡è§‚å¯Ÿä»–çš„å®ç°æœ‰ä¸¤ä¸ªå®ç°ï¼š" class="headerlink" title="é€šè¿‡è§‚å¯Ÿä»–çš„å®ç°æœ‰ä¸¤ä¸ªå®ç°ï¼š"></a>é€šè¿‡è§‚å¯Ÿä»–çš„å®ç°æœ‰ä¸¤ä¸ªå®ç°ï¼š</h3><ul><li><p>DefaultMapResultHandler :  è¿”å›çš„æ˜¯ Map</p></li><li><p>DefaultResultHandler ï¼šè¿”å›çš„æ˜¯ List<Object></p></li></ul><p>#å¾…ç»­ã€‚ã€‚ã€‚ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Javaå†…çœæœºåˆ¶</title>
      <link href="/2020/01/07/java-nei-sheng-ji-zhi/"/>
      <url>/2020/01/07/java-nei-sheng-ji-zhi/</url>
      
        <content type="html"><![CDATA[<p>0x02ï¼š<code>JavaåŸºç¡€</code></p><span id="more"></span><h1 id="ç›´æ¥ä¸Šä»£ç "><a href="#ç›´æ¥ä¸Šä»£ç " class="headerlink" title="ç›´æ¥ä¸Šä»£ç "></a>ç›´æ¥ä¸Šä»£ç </h1><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>peidasoft<span class="token punctuation">.</span>Introspector<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>BeanInfo<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>Introspector<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>PropertyDescriptor<span class="token punctuation">;</span><span class="token keyword">import</span> java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span>Method<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanInfoUtil</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">setProperty</span><span class="token punctuation">(</span>UserInfo userInfo<span class="token punctuation">,</span>String userName<span class="token punctuation">)</span><span class="token keyword">throws</span> Exception<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        PropertyDescriptor propDesc<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">PropertyDescriptor</span><span class="token punctuation">(</span>userName<span class="token punctuation">,</span>UserInfo<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Method methodSetUserName<span class="token operator">=</span>propDesc<span class="token punctuation">.</span><span class="token function">getWriteMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        methodSetUserName<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">,</span> <span class="token string">"wong"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"set userName:"</span><span class="token operator">+</span>userInfo<span class="token punctuation">.</span><span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">getProperty</span><span class="token punctuation">(</span>UserInfo userInfo<span class="token punctuation">,</span>String userName<span class="token punctuation">)</span><span class="token keyword">throws</span> Exception<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        PropertyDescriptor proDescriptor <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">PropertyDescriptor</span><span class="token punctuation">(</span>userName<span class="token punctuation">,</span>UserInfo<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Method methodGetUserName<span class="token operator">=</span>proDescriptor<span class="token punctuation">.</span><span class="token function">getReadMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Object objUserName<span class="token operator">=</span>methodGetUserName<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"get userName:"</span><span class="token operator">+</span>objUserName<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> more <span class="token operator">--</span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> Javaå†…çœ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker+Gitlab+Jenkinsè‡ªåŠ¨åŒ–ç®¡ç†é¡¹ç›®</title>
      <link href="/2019/11/11/dockergitlabjenkins/"/>
      <url>/2019/11/11/dockergitlabjenkins/</url>
      
        <content type="html"><![CDATA[<p>0x01ï¼šğŸ‘æ­å»ºé¡¹ç›®è‡ªåŠ¨åŒ–éƒ¨ç½²</p><span id="more"></span><h3 id="ä¸€ã€ç¯å¢ƒé…ç½®ï¼š"><a href="#ä¸€ã€ç¯å¢ƒé…ç½®ï¼š" class="headerlink" title="ä¸€ã€ç¯å¢ƒé…ç½®ï¼š**"></a>ä¸€ã€ç¯å¢ƒé…ç½®ï¼š**</h3><blockquote><ul><li><code>System</code>ï¼šCentOS 7</li><li><code>GitLab Version</code>ï¼šbeginor/gitlab-ce:11.0.1-ce.0</li><li><code>JenKins Version</code>ï¼šå®˜ç½‘æœ€æ–° <a href="http://mirrors.jenkins.io/war-stable/latest/jenkins.war">jenkins.war</a></li><li><code>JDK Version</code>: 1.8 </li><li><code>Maven Version</code>:  3.6.1 </li></ul></blockquote><h3 id="äºŒã€Dokcer"><a href="#äºŒã€Dokcer" class="headerlink" title="äºŒã€Dokcer:"></a>äºŒã€Dokcer:</h3><ol><li><h4 id="å®‰è£…éœ€è¦çš„åº“"><a href="#å®‰è£…éœ€è¦çš„åº“" class="headerlink" title="å®‰è£…éœ€è¦çš„åº“"></a><strong>å®‰è£…éœ€è¦çš„åº“</strong></h4><ul><li><pre class="line-numbers language-shell"><code class="language-shell">sudo yum install -y yum-utils device-mapper-persistent-data lvm2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul></li><li><h4 id="æ·»åŠ dockerçš„æº"><a href="#æ·»åŠ dockerçš„æº" class="headerlink" title="æ·»åŠ dockerçš„æº"></a><strong>æ·»åŠ dockerçš„æº</strong></h4><ul><li><pre class="line-numbers language-shell"><code class="language-shell">sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul></li><li><h4 id="å®‰è£…Docker"><a href="#å®‰è£…Docker" class="headerlink" title="å®‰è£…Docker"></a><strong>å®‰è£…Docker</strong></h4><ul><li><pre class="line-numbers language-shell"><code class="language-shell">sudo yum install docker-ce<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul></li><li><h4 id="å¯åŠ¨dockeræœåŠ¡å’Œå¼€æœºè‡ªå¯"><a href="#å¯åŠ¨dockeræœåŠ¡å’Œå¼€æœºè‡ªå¯" class="headerlink" title="å¯åŠ¨dockeræœåŠ¡å’Œå¼€æœºè‡ªå¯"></a><strong>å¯åŠ¨dockeræœåŠ¡å’Œå¼€æœºè‡ªå¯</strong></h4><ul><li><pre class="line-numbers language-shell"><code class="language-shell">sudo systemctl start dockersudo systemctl enable docker<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ul></li><li><h4 id="Docker-Installed-End"><a href="#Docker-Installed-End" class="headerlink" title="Docker Installed End"></a><strong><code>Docker Installed End</code></strong></h4></li></ol><h3 id="ä¸‰ã€Gitlabï¼š"><a href="#ä¸‰ã€Gitlabï¼š" class="headerlink" title="ä¸‰ã€Gitlabï¼š"></a>ä¸‰ã€Gitlabï¼š</h3><ul><li><h4 id="PSï¼š"><a href="#PSï¼š" class="headerlink" title="PSï¼š"></a>PSï¼š</h4><ul><li>å…³é—­é˜²ç«å¢™ï¼šsystemctl stop firewalld</li><li>å…³é—­é˜²ç«å¢™è‡ªå¯ï¼šsystemctl disable firewalld</li></ul></li></ul><ol><li><h4 id="åˆ›å»ºæ˜ å°„æ–‡ä»¶å¤¹ï¼ˆå¯è‡ªå®šä¹‰ï¼Œå¾…ä¼šå„¿è‡ªå·±ä¿®æ”¹å‘½ä»¤ç›¸å…³çš„å‚æ•°ï¼‰"><a href="#åˆ›å»ºæ˜ å°„æ–‡ä»¶å¤¹ï¼ˆå¯è‡ªå®šä¹‰ï¼Œå¾…ä¼šå„¿è‡ªå·±ä¿®æ”¹å‘½ä»¤ç›¸å…³çš„å‚æ•°ï¼‰" class="headerlink" title="åˆ›å»ºæ˜ å°„æ–‡ä»¶å¤¹ï¼ˆå¯è‡ªå®šä¹‰ï¼Œå¾…ä¼šå„¿è‡ªå·±ä¿®æ”¹å‘½ä»¤ç›¸å…³çš„å‚æ•°ï¼‰"></a><strong>åˆ›å»ºæ˜ å°„æ–‡ä»¶å¤¹</strong>ï¼ˆå¯è‡ªå®šä¹‰ï¼Œå¾…ä¼šå„¿è‡ªå·±ä¿®æ”¹å‘½ä»¤ç›¸å…³çš„å‚æ•°ï¼‰</h4><ul><li><pre class="line-numbers language-shell"><code class="language-shell">mkdir -p /data/gitlab/etcmkdir -p /data/gitlab/logmkdir -p /data/gitlab/data<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ul></li><li><h4 id="å®‰è£…å¹¶å¯åŠ¨GitLab"><a href="#å®‰è£…å¹¶å¯åŠ¨GitLab" class="headerlink" title="å®‰è£…å¹¶å¯åŠ¨GitLab"></a><strong>å®‰è£…å¹¶å¯åŠ¨GitLab</strong></h4><ul><li><blockquote><h4 id="å‚æ•°è§£æï¼š"><a href="#å‚æ•°è§£æï¼š" class="headerlink" title="å‚æ•°è§£æï¼š"></a><strong><code>å‚æ•°è§£æï¼š</code></strong></h4></blockquote><pre class="line-numbers language-shell"><code class="language-shell">--detach è¡¨ç¤ºåå°è¿è¡Œ--publish è¡¨ç¤ºå®¹å™¨ç±»ä¸å®¿æœºæ˜ å°„å’Œç«¯å£--name è¡¨ç¤ºå®¹å™¨çš„åå­—--restart é‡å¯ç­–ç•¥ï¼šé€€å‡ºå®¹å™¨æ˜¯é‡å¯å®¹å™¨<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><blockquote><h4 id="æ„å»ºå®¹å™¨å‘½ä»¤"><a href="#æ„å»ºå®¹å™¨å‘½ä»¤" class="headerlink" title="æ„å»ºå®¹å™¨å‘½ä»¤"></a><code>æ„å»ºå®¹å™¨å‘½ä»¤</code></h4></blockquote><pre class="line-numbers language-shell"><code class="language-shell">docker run \ --detach \ --publish 998:22 \ --publish 8443:443 \ --publish 80:80 \ --name gitlab \ --restart unless-stopped \ -v /data/gitlab/etc:/etc/gitlab \ -v /data/gitlab/log:/var/log/gitlab \ -v /data/gitlab/data:/var/opt/gitlab \ beginor/gitlab-ce:11.0.1-ce.0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><blockquote><p><strong>åœ¨å‘½ä»¤çš„æœ€åçš„ä¸€è¡Œä¸ºé•œåƒçš„åç§°(<code>beginor/gitlab-ce:11.0.1-ce.0</code>)æˆ–è€…ID(éœ€è¦å…ˆ<code>docker pull é•œåƒ</code>ï¼Œåé€šè¿‡ <code>docker images</code>ï¼Œå¯ä»¥è·å–åˆ°é•œåƒçš„ID)ï¼Œè¿è¡Œä¸Šé¢çš„å‘½ä»¤å³å¯å®‰è£…å¹¶å¯åŠ¨gitlabï¼ˆè¿™æ ·ä»–ä¼šå…ˆæ£€æŸ¥æœ¬åœ°æœ‰æ²¡æœ‰æ­¤é•œåƒï¼Œæ²¡æœ‰å°±ä¼šå…ˆpullï¼Œç„¶åå†å¸¦å‚æ•°runï¼‰ã€‚</strong></p></blockquote><pre class="line-numbers language-shell"><code class="language-shell">docker psï¼š æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨docker ps -aï¼šæŸ¥çœ‹æ‰€æœ‰åˆ›å»ºçš„å®¹å™¨<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ul></li></ol><h3 id="å››ã€Jenkinsï¼š"><a href="#å››ã€Jenkinsï¼š" class="headerlink" title="å››ã€Jenkinsï¼š"></a>å››ã€Jenkinsï¼š</h3><ol><li><h4 id="ä¸‹è½½ç›¸å…³çš„åŒ…"><a href="#ä¸‹è½½ç›¸å…³çš„åŒ…" class="headerlink" title="ä¸‹è½½ç›¸å…³çš„åŒ…:"></a><strong>ä¸‹è½½ç›¸å…³çš„åŒ…</strong>:</h4><ul><li><code>Jenkins.waråŒ…ï¼ˆè¿™å„¿æ˜¯ç”¨javaå¯åŠ¨ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡dockerï¼‰ã€mavenã€jdk</code></li></ul></li><li><h4 id="è¿è¡Œå‚æ•°"><a href="#è¿è¡Œå‚æ•°" class="headerlink" title="è¿è¡Œå‚æ•°:"></a><strong>è¿è¡Œå‚æ•°</strong>:</h4><ul><li><pre class="line-numbers language-shell"><code class="language-shell">java  -Djava.awt.headless=true -DJENKINS_HOME=/var/lib/jenkins -jar /usr/lib/jenkins/jenkins.war --logfile=/var/log/jenkins/jenkins.log --webroot=/var/cache/jenkins/war --httpPort=8088 --debug=5 --handlerCountMax=100 --handlerCountMaxIdle=20<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><blockquote><p><code>å‚æ•°è§£æï¼š</code></p><pre class="line-numbers language-shell"><code class="language-shell">java  -Djava.awt.headless=true #è§£é‡Šï¼šhttps://www.cnblogs.com/wudi-dudu/p/7871405.html   -DJENKINS_HOME=/var/lib/jenkins #å®šä¹‰Jenkinsçš„æ ¹ç›®å½•   -jar /usr/lib/jenkins/jenkins.war #waråŒ…ä½ç½®ï¼Œæ ¹æ®ä½ çš„å®é™…æƒ…å†µå¡«å†™å‚æ•°   --logfile=/var/log/jenkins/jenkins.log #Jenkinsçš„æ—¥å¿—è¾“å‡º   --webroot=/var/cache/jenkins/war #Jenkinsç¼“å­˜è·¯å¾„   --httpPort=8088 #Jenkinsçš„ç«¯å£ï¼ˆçœ‹è‡ªå·±çš„ç«¯å£æƒ…å†µä¿®æ”¹ï¼‰   --debug=5 #   --handlerCountMax=100 #   --handlerCountMaxIdle=20 #<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote></li></ul></li><li><h4 id="è®¿é—®-http-ip-httpPort-å³å¯å¼€å§‹Jenkinsä¹‹æ—…"><a href="#è®¿é—®-http-ip-httpPort-å³å¯å¼€å§‹Jenkinsä¹‹æ—…" class="headerlink" title="è®¿é—® http://ip:httpPort å³å¯å¼€å§‹Jenkinsä¹‹æ—…:"></a><strong>è®¿é—® <a href="http://ip:httpPort">http://ip:httpPort</a> å³å¯å¼€å§‹<code>Jenkins</code>ä¹‹æ—…</strong>:</h4><ul><li>é¦–å…ˆå»æç¤ºçš„è·¯å¾„å¤åˆ¶å¯†ç åˆ° Input æ¡†;</li><li>ç„¶åé€‰æ‹©æ¨èæ’ä»¶ï¼Œè¿™å„¿å¯èƒ½æœ‰ç‚¹æ…¢ï¼Œçœ‹å„è‡ªçš„ç½‘é€Ÿ;</li><li>å®‰è£…å®Œåå³å¯åˆ›å»ºè´¦æˆ·;</li><li>Jenkinsæ­å»ºç»“æŸã€‚</li></ul></li></ol><h3 id="äº”ã€å®ç°ä»Gitlabè‡ªåŠ¨æ‹‰å–ä»£ç å¹¶éƒ¨ç½²ï¼š"><a href="#äº”ã€å®ç°ä»Gitlabè‡ªåŠ¨æ‹‰å–ä»£ç å¹¶éƒ¨ç½²ï¼š" class="headerlink" title="äº”ã€å®ç°ä»Gitlabè‡ªåŠ¨æ‹‰å–ä»£ç å¹¶éƒ¨ç½²ï¼š"></a>äº”ã€å®ç°ä»Gitlabè‡ªåŠ¨æ‹‰å–ä»£ç å¹¶éƒ¨ç½²ï¼š</h3><ol><li><h4 id="ç™»å½•ç•Œé¢"><a href="#ç™»å½•ç•Œé¢" class="headerlink" title="ç™»å½•ç•Œé¢"></a><strong>ç™»å½•ç•Œé¢</strong></h4><p><a href="https://imgchr.com/i/KrPuwD"><img src="https://s2.ax1x.com/2019/10/26/KrPuwD.md.png" alt="KrPuwD.md.png"></a></p></li><li><h4 id="ç™»å½•åçš„ç•Œé¢ï¼ˆæ–°çš„æ²¡æœ‰ä»»ä½•çš„ä»»åŠ¡ï¼‰"><a href="#ç™»å½•åçš„ç•Œé¢ï¼ˆæ–°çš„æ²¡æœ‰ä»»ä½•çš„ä»»åŠ¡ï¼‰" class="headerlink" title="ç™»å½•åçš„ç•Œé¢ï¼ˆæ–°çš„æ²¡æœ‰ä»»ä½•çš„ä»»åŠ¡ï¼‰"></a><strong>ç™»å½•åçš„ç•Œé¢</strong>ï¼ˆæ–°çš„æ²¡æœ‰ä»»ä½•çš„ä»»åŠ¡ï¼‰</h4><p><img src="https://s2.ax1x.com/2019/10/26/KrP20U.png" alt="KrP20U.png"></p></li><li><h4 id="æ–°å»ºå·¥ä½œç©ºé—´"><a href="#æ–°å»ºå·¥ä½œç©ºé—´" class="headerlink" title="æ–°å»ºå·¥ä½œç©ºé—´"></a><strong>æ–°å»ºå·¥ä½œç©ºé—´</strong></h4><ol><li><p><strong>åˆ›å»ºä»»åŠ¡</strong><img src="https://s2.ax1x.com/2019/10/27/KriOK0.png" alt="KriOK0.png"></p></li><li><p><strong>é€šç”¨é…ç½®</strong></p><ol><li><p>è¿™å„¿é…ç½®ä¸¤ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•° <strong>Discard old builds</strong> <img src="https://s2.ax1x.com/2019/10/27/KretoV.png" alt="KretoV.png"></p></li><li><p><strong>ç¬¬äºŒä¸ªå‚æ•° This project is  parameterized</strong> </p></li></ol><p><img src="https://s2.ax1x.com/2019/10/27/KrlguF.png" alt="KrlguF.png"> </p></li><li><p><strong>æºç ç®¡ç†</strong>ï¼ˆæˆ‘ä»¬ç”¨gitlabï¼Œè¿™å„¿éœ€è¦è‡ªå·±ç°åœ¨Gitlabä¸­å»åˆ›å»ºé¡¹ç›®å’Œè·å–é¡¹ç›®åœ°å€ï¼‰<img src="https://s2.ax1x.com/2019/10/27/KrtNRA.png" alt="KrtNRA.png"></p></li><li><p><strong>æ„å»ºè§¦å‘å™¨</strong>ï¼ˆæ„å»ºæ–¹å¼æœ‰å¥½å¤šç§ï¼Œå…·ä½“çœ‹å®é™…æƒ…å†µï¼Œæ—¥ç¨‹è¡¨å¯ä»¥ç›´æ¥copyï¼‰</p><p><img src="https://s2.ax1x.com/2019/10/27/KrtWMq.png" alt="KrtWMq.png"></p><p><code>å¯å‚è€ƒSCDN</code>ï¼šã€<a href="https://blog.csdn.net/xueyingqi/article/details/53216506">Poll SCM</a>ã€‘</p></li><li><p><strong>æ„å»ºç¯å¢ƒ</strong>ï¼šä¸ç”¨è®¾ç½®ï¼Œè·³è¿‡</p></li><li><p><strong>æ„å»º</strong>ï¼šå› ä¸ºå¯åŠ¨é¡¹ç›®çš„æ–¹å¼æœ‰å¾ˆå¤šç§æ–¹æ¡ˆï¼Œæ‰€ä»¥è¿™å„¿å¯ä»¥ä½¿ç”¨éª¨ç°çº§çš„æ–¹å¼ï¼ˆshellï¼‰</p><ul><li><p>psï¼š<strong>æœ¬æ¬¡æ¼”ç¤ºçš„æ˜¯åœ¨æ­å»ºçš„Jenkinsçš„æœåŠ¡å™¨ä¸­ï¼Œå¯åŠ¨é¡¹ç›®ï¼Œå¦‚æœä½ éœ€è¦å°†é¡¹ç›®åˆ°ç¬¬ä¸‰æ–¹æœåŠ¡å™¨æ˜¯ä¸Šå¯åŠ¨ï¼Œå°±å¾—åœ¨ç¬¬ä¸‰æ–¹æœåŠ¡å™¨çš„è·¯å¾„ä¸‹å†™å¯åŠ¨è„šæœ¬ï¼ˆstart.shï¼‰,è¿™æ˜¯ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œä½†ä¸æ˜¯ç»å¯¹çš„ã€‚</strong></p></li><li><p>æ·»åŠ æ„å»ºæ–¹å¼ï¼š <code>Execute shell</code></p></li><li><pre class="line-numbers language-shell"><code class="language-shell">#$ï¼šè¿™å„¿æ˜¯åœ¨å¼•ç”¨åˆšåˆšåœ¨ This project is  parameterized é…ç½®çš„å‚æ•°case $test_dev in   deploy)   #å½“é€‰æ‹©çš„æ˜¯ deploy å°±æ‰§è¡Œä¸‹é¢å‘¢çš„å‘½ä»¤,æ³¨æ„ç»å¯¹è·¯å¾„     /usr/local/maven/bin/mvn clean package --settings /usr/local/maven/conf/settings.xml -Dmaven.test.skip=true     ;;   rollback)   #å½“é€‰æ‹©çš„æ˜¯è¿™ä¸ªå³æ˜¯å›æ»š        echo "$&#123;version&#125;"     rm -rf target     #$&#123;JENKINS_HOME&#125;æ­¤å‚æ•°æ˜¯Jenkinsé»˜è®¤çš„ä¿„è·¯å¾„ï¼Œè‡ªå·±å’Œè‡ªå·±çš„æ ¸å¯¹æ”¹æˆå¯¹åº”çš„è·¯å¾„     cp -R $&#123;JENKINS_HOME&#125;/jobs/ä½ çš„ä»»åŠ¡å/builds/$&#123;version&#125;/archive/target .     pwd && ls     ;;   *)     exit     ;;esacjenkinsjarpath=$&#123;JENKINS_HOME&#125;/workspace/ä½ çš„ä»»åŠ¡å #å¦‚test_devjarpath=/data/test/target #è¿™æ˜¯ä½ è¦å¯åŠ¨é¡¹ç›®çš„è·¯å¾„ï¼ˆå°†jaråŒ…å¤åˆ¶åˆ°æ­¤ç›®å½•ï¼‰cp $&#123;jenkinsjarpath&#125;/target/test.jar /data/test/ #å°†jaråŒ…å¤åˆ¶åˆ°jarpathsh /data/test/start.sh $&#123;port&#125; #æ‰§è¡Œjarpathçš„shellè„šæœ¬ï¼ˆç±»å®¹ä¸ºå¯åŠ¨jaråŒ…çš„å‘½ä»¤ï¼‰echo "Start Run......"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>start.sh</p><pre class="line-numbers language-shell"><code class="language-shell">#!/bash/binjarName=test.jarfunction shutDown()&#123;        #è·å–ä¸Šä¸€æ¬¡çš„æ„å»ºçš„é¡¹ç›®pid        pid=`ps -ef|grep $&#123;jarName&#125;|grep -v grep|awk '&#123;print $2&#125;'`             kill -9 $&#123;pid&#125; #å¹²æ‰             echo "shut down" #æ‰“å°ä¿¡æ¯&#125;function startUp()&#123;        #2:æ˜¯æ‰“å°é”™è¯¯åˆ°å±å¹•ï¼Œ&: æ‰“å°åˆ°åå°        nohup java -jar test.jar --server.port=$1  >> ./logs.log 2>&1 & #$1æ˜¯è¿ç”¨ä¸Šé¢å‚æ•°$&#123;port&#125;        echo "start up"&#125;#å…ˆå…³é—­ä¸Šä¸€ä¸ªé¡¹ç›®shutDown()#å¯åŠ¨æ–°æ„å»ºçš„é¡¹ç›®startUp()<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li><li><p><strong>æ„å»ºåæ“ä½œ</strong></p><p><img src="https://s2.ax1x.com/2019/10/27/KrwuBq.png" alt="KrwuBq.png"></p></li></ol></li><li><p>å›åˆ°å¼€å§‹ï¼š</p><p><img src="https://s2.ax1x.com/2019/10/27/KrwCHP.png" alt="KrwCHP.png"></p></li><li><p><strong>ç°åœ¨ä½ å¯ä»¥æ˜¯å®ç°è‡ªåŠ¨Gitlab+jenkins æ„å»ºé¡¹ç›®äº†ã€‚</strong></p></li><li><p><strong>Shell è„šæœ¬æ–¹é¢å¯ä»¥å‚è€ƒä¸‹</strong> ã€<a href="https://www.runoob.com/linux/linux-shell.html">èœé¸Ÿæ•™ç¨‹</a>ã€‘</p></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Jenkins </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
